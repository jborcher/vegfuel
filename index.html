<!DOCTYPE html>
<!-- saved from url=(0058)file:///C:/Users/jerem/Downloads/vegfuel-sage-index_1.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>VegFuel â€” Nutrition for Athletes</title>
<meta name="theme-color" content="#eef4ee">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="VegFuel">
<meta name="description" content="Plant-powered nutrition tracker for athletes">
<link rel="manifest" href="file:///C:/Users/jerem/Downloads/manifest.json">
<link rel="icon" href="file:///C:/Users/jerem/Downloads/icon-192.png">
<link rel="apple-touch-icon" href="file:///C:/Users/jerem/Downloads/icon-192.png">
<link href="./index_files/css2" rel="stylesheet">
<style>
  :root {
    --bg: #d4e6d4;
    --card: #e4f0e4;
    --card2: #e6efe6;
    --green: #2d8c4e;
    --lime: #5aab2e;
    --orange: #d4622a;
    --blue: #2e6fa8;
    --purple: #7c4daa;
    --text: #1a2e1b;
    --muted: #6b8f6c;
    --border: #c5dbc5;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    min-height: 100vh;
    padding: 0 0 max(60px, calc(60px + env(safe-area-inset-bottom)));
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    -webkit-text-size-adjust: 100%;
  }
  /* Prevent tap highlight flash on mobile */
  button, .preset-chip { -webkit-tap-highlight-color: transparent; }
  /* Grain overlay */
  body::before {
    content:''; position:fixed; inset:0; pointer-events:none; z-index:999;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
    opacity: 0.12;
  }

  header {
    padding: 20px 20px 16px;
    border-bottom: 1px solid var(--border);
    display: flex; align-items: baseline; gap: 12px; flex-wrap: wrap;
    animation: fadeDown 0.6s ease both;
  }
  header h1 {
    font-family: 'Syne', sans-serif;
    font-size: 1.6rem; font-weight: 800; letter-spacing: -1px;
    color: var(--green);
  }
  header span { color: var(--muted); font-size: 0.75rem; }
  @media (min-width: 600px) {
    header { padding: 32px 40px 20px; }
    header h1 { font-size: 2rem; }
  }

  .container { max-width: 1100px; margin: 0 auto; padding: 20px 14px; }
  @media (min-width: 600px) { .container { padding: 36px 24px; } }

  .layout { display: grid; grid-template-columns: 1fr 1fr; gap: 28px; }
  @media (max-width: 800px) { .layout { grid-template-columns: 1fr; } }

  .panel {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px 16px;
    animation: fadeUp 0.5s ease both;
  }
  @media (min-width: 600px) { .panel { padding: 28px; } }
  .panel:nth-child(2) { animation-delay: 0.1s; }

  .panel-title {
    font-family: 'Syne', sans-serif;
    font-size: 0.75rem; font-weight: 700;
    letter-spacing: 3px; text-transform: uppercase;
    color: var(--muted); margin-bottom: 20px;
  }

  /* Search input */
  .search-row {
    display: grid;
    grid-template-columns: 1fr 72px auto;
    grid-template-rows: auto auto;
    gap: 8px;
    margin-bottom: 14px;
  }
  .search-row input[type="text"] {
    grid-column: 1 / 2;
  }
  .search-row input[type="number"] {
    grid-column: 2 / 3;
    width: 100%;
  }
  .search-row select {
    grid-column: 3 / 4;
    grid-row: 1 / 2;
  }
  .search-row .btn {
    grid-column: 1 / -1;
    grid-row: 2 / 3;
    width: 100%;
  }
  @media (min-width: 600px) {
    .search-row {
      display: flex; gap: 10px;
    }
    .search-row .btn { width: auto; }
  }
  input[type="text"], input[type="number"], select {
    background: var(--card2);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 1rem; /* prevents iOS zoom on focus */
    padding: 12px 14px;
    border-radius: 8px;
    outline: none;
    transition: border-color 0.2s;
  }
  input:focus, select:focus { border-color: var(--green); }
  input[type="text"] { flex: 1; }
  input[type="number"] { width: 72px; }
  select { flex: 1; min-width: 80px; }

  .btn {
    background: var(--green); color: #0e1a0f;
    font-family: 'Syne', sans-serif; font-weight: 700;
    font-size: 0.85rem; letter-spacing: 1px;
    padding: 12px 18px; border: none;
    border-radius: 8px; cursor: pointer;
    transition: background 0.2s, transform 0.1s;
    white-space: nowrap;
    min-height: 44px; /* touch target */
    touch-action: manipulation;
  }
  .btn:hover { background: var(--lime); }
  .btn:active { transform: scale(0.97); }
  .btn-ghost {
    background: transparent; color: var(--green);
    border: 1px solid var(--border);
  }
  .btn-ghost:hover { background: var(--card2); color: var(--lime); }

  /* Preset list */
  .preset-grid {
    display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px;
  }
  .preset-chip {
    background: var(--card2); border: 1px solid var(--border);
    color: var(--text); font-family: 'DM Mono', monospace;
    font-size: 0.78rem; padding: 8px 14px; border-radius: 999px;
    cursor: pointer; transition: all 0.15s;
    min-height: 36px; display: inline-flex; align-items: center;
    touch-action: manipulation;
  }
  .preset-chip:hover { border-color: var(--green); color: var(--green); }
  .preset-chip.selected { background: var(--green); color: #0e1a0f; border-color: var(--green); }

  /* Ingredient list */
  .ingredient-list { list-style: none; display: flex; flex-direction: column; gap: 8px; }
  .ingredient-item {
    display: flex; align-items: center; justify-content: space-between;
    background: var(--card2); border: 1px solid var(--border);
    border-radius: 8px; padding: 10px 14px;
    animation: fadeIn 0.25s ease;
  }
  .ingredient-item span { font-size: 0.82rem; }
  .ingredient-item .amount { color: var(--lime); margin-left: 6px; }
  .remove-btn {
    background: none; border: none; color: var(--muted);
    cursor: pointer; font-size: 1rem; line-height: 1;
    transition: color 0.15s;
    min-width: 36px; min-height: 36px;
    display: flex; align-items: center; justify-content: center;
    touch-action: manipulation;
  }
  .remove-btn:hover { color: #f87171; }

  /* Results panel */
  .results-panel {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px 16px;
    margin-top: 20px;
    animation: fadeUp 0.5s ease both;
    animation-delay: 0.2s;
  }
  @media (min-width: 600px) { .results-panel { padding: 28px; margin-top: 28px; } }

  .meal-name-row { display: flex; gap: 10px; margin-bottom: 24px; }
  .meal-name-row input { flex: 1; font-size: 1rem; padding: 12px 16px; }

  .macro-grid {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px;
    margin-bottom: 28px;
  }
  @media (max-width: 600px) { .macro-grid { grid-template-columns: repeat(2,1fr); } }

  .macro-card {
    background: var(--card2);
    border: 1px solid var(--border);
    border-radius: 12px; padding: 16px 14px;
    text-align: center;
    transition: transform 0.2s;
  }
  .macro-card:hover { transform: translateY(-2px); }
  .macro-card .val {
    font-family: 'Nunito', sans-serif;
    font-size: 1.8rem; font-weight: 900;
    line-height: 1; margin-bottom: 4px;
  }
  .macro-card .lbl { font-size: 0.68rem; color: var(--muted); letter-spacing: 2px; text-transform: uppercase; font-family: 'Nunito', sans-serif; font-weight: 700; }

  .micro-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
    margin-bottom: 28px;
  }
  @media (max-width: 600px) { .micro-grid { grid-template-columns: repeat(2,1fr); } }

  .micro-card {
    background: var(--card2); border: 1px solid var(--border);
    border-radius: 10px; padding: 12px;
  }
  .micro-card .micro-lbl { font-size: 0.68rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 6px; }
  .micro-card .micro-bar-wrap { background: var(--border); border-radius: 4px; height: 6px; margin-bottom: 4px; overflow: hidden; }
  .micro-card .micro-bar { height: 100%; border-radius: 4px; transition: width 0.6s cubic-bezier(.4,0,.2,1); }
  .micro-card .micro-val { font-size: 0.75rem; color: var(--text); }

  .athlete-tip {
    background: linear-gradient(135deg, #ddeedd, #cfe8cf);
    border: 1px solid #b0cfb0;
    border-left: 3px solid var(--green);
    border-radius: 10px; padding: 14px 18px;
    font-size: 0.8rem; color: #2e5230; line-height: 1.6;
  }
  .athlete-tip strong { color: var(--green); font-family: 'Syne', sans-serif; }

  .empty-state {
    text-align: center; padding: 40px 20px;
    color: var(--muted); font-size: 0.82rem; line-height: 1.8;
  }
  .empty-state .icon { font-size: 2.5rem; margin-bottom: 10px; }

  .section-label {
    font-size: 0.68rem; letter-spacing: 2px; text-transform: uppercase;
    color: var(--muted); margin-bottom: 12px;
    font-family: 'Syne', sans-serif; font-weight: 700;
  }

  .divider { border: none; border-top: 1px solid var(--border); margin: 20px 0; }

  /* â”€â”€ Goals Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .goals-panel {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    margin-top: 20px;
    overflow: hidden;
    animation: fadeUp 0.5s ease both;
    animation-delay: 0.15s;
  }
  @media (min-width: 600px) { .goals-panel { margin-top: 28px; } }

  .goals-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 16px;
    cursor: pointer;
    user-select: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  @media (min-width: 600px) { .goals-header { padding: 20px 28px; } }

  .goals-header-left { display: flex; align-items: center; gap: 10px; }
  .goals-toggle-icon {
    font-size: 0.85rem; color: var(--muted);
    transition: transform 0.3s ease;
    display: inline-block;
  }
  .goals-toggle-icon.open { transform: rotate(180deg); }

  .goals-body {
    padding: 0 16px 20px;
    display: none;
  }
  .goals-body.open { display: block; }
  @media (min-width: 600px) { .goals-body { padding: 0 28px 24px; } }

  .goals-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 16px;
  }
  @media (min-width: 500px) { .goals-grid { grid-template-columns: repeat(4, 1fr); } }

  .goal-field { display: flex; flex-direction: column; gap: 5px; }
  .goal-field label {
    font-size: 0.65rem; letter-spacing: 2px; text-transform: uppercase;
    color: var(--muted); font-family: 'Syne', sans-serif; font-weight: 700;
  }
  .goal-field input {
    width: 100%; font-size: 1rem; padding: 10px 10px;
    text-align: center;
  }
  .goal-unit {
    font-size: 0.65rem; color: var(--muted); text-align: center; margin-top: 2px;
  }

  .goals-presets {
    display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 14px;
  }

  /* â”€â”€ Macro card goal bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .macro-card .goal-bar-wrap {
    background: var(--border); border-radius: 4px; height: 5px;
    margin: 8px 0 4px; overflow: hidden;
  }
  .macro-card .goal-bar {
    height: 100%; border-radius: 4px;
    transition: width 0.6s cubic-bezier(.4,0,.2,1);
  }
  .macro-card .goal-pct {
    font-size: 0.65rem; color: var(--muted);
    font-family: 'Nunito', sans-serif; font-weight: 700;
  }
  .macro-card.over .goal-bar { background: #f87171 !important; }
  .macro-card.over .goal-pct { color: #f87171; }

  @keyframes fadeUp { from { opacity:0; transform: translateY(16px); } to { opacity:1; transform: none; } }
  @keyframes fadeDown { from { opacity:0; transform: translateY(-10px); } to { opacity:1; transform: none; } }
  @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
</style>
</head>
<body>

<header>
  <h1>ðŸ¥¦ VegFuel</h1>
  <span>nutrition tracker for plant-powered athletes</span>
</header>

<div class="container">
  <div class="layout">

    <!-- LEFT: Input Panel -->
    <div class="panel">
      <div class="panel-title">Add Ingredients</div>

      <!-- Type input -->
      <div class="section-label">Type an ingredient</div>
      <div class="search-row">
        <input type="text" id="customInput" placeholder="e.g. tofu, quinoa, spinach..." list="ingredientSuggestions" onkeydown="if(event.key===&#39;Enter&#39;) addCustomIngredient()">
        <datalist id="ingredientSuggestions"><option value="tofu"></option><option value="tempeh"></option><option value="edamame"></option><option value="lentils"></option><option value="green lentils"></option><option value="chickpeas"></option><option value="black beans"></option><option value="greek yogurt"></option><option value="cottage cheese"></option><option value="eggs"></option><option value="quinoa"></option><option value="brown rice"></option><option value="oats"></option><option value="whole wheat bread"></option><option value="barley"></option><option value="spinach"></option><option value="kale"></option><option value="broccoli"></option><option value="sweet potato"></option><option value="avocado"></option><option value="carrot"></option><option value="celery"></option><option value="cucumber"></option><option value="tomato"></option><option value="bell pepper"></option><option value="red bell pepper"></option><option value="onion"></option><option value="garlic"></option><option value="mushrooms"></option><option value="zucchini"></option><option value="cauliflower"></option><option value="brussels sprouts"></option><option value="green beans"></option><option value="peas"></option><option value="corn"></option><option value="potato"></option><option value="beet"></option><option value="asparagus"></option><option value="cabbage"></option><option value="bok choy"></option><option value="arugula"></option><option value="swiss chard"></option><option value="collard greens"></option><option value="eggplant"></option><option value="leek"></option><option value="butternut squash"></option><option value="acorn squash"></option><option value="artichoke"></option><option value="turnip"></option><option value="radish"></option><option value="banana"></option><option value="apple"></option><option value="orange"></option><option value="blueberries"></option><option value="strawberries"></option><option value="mango"></option><option value="pineapple"></option><option value="grapes"></option><option value="watermelon"></option><option value="peach"></option><option value="pear"></option><option value="kiwi"></option><option value="lemon"></option><option value="cherries"></option><option value="raspberries"></option><option value="blackberries"></option><option value="pomegranate"></option><option value="papaya"></option><option value="almonds"></option><option value="chia seeds"></option><option value="hemp seeds"></option><option value="pumpkin seeds"></option><option value="peanut butter"></option><option value="soy milk"></option><option value="oat milk"></option><option value="nutritional yeast"></option></datalist>
        <input type="number" id="customAmount" placeholder="100" value="100" min="0.1" step="0.1" onkeydown="if(event.key===&#39;Enter&#39;) addCustomIngredient()">
        <select id="customUnit">
          <option value="g">g</option>
          <option value="oz">oz (wt)</option>
          <option value="floz">fl oz</option>
          <option value="tsp">tsp</option>
          <option value="tbsp">tbsp</option>
          <option value="cup">cup</option>
        </select>
        <button class="btn" onclick="addCustomIngredient()">Add</button>
      </div>

      <div id="recentSection" style="display:none; margin-top:16px">
        <div class="section-label">Recently used</div>
        <div class="preset-grid" id="recentChips"></div>
      </div>

    </div>

    <!-- RIGHT: Meal list -->
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px">
        <div class="panel-title" style="margin:0">Meal Ingredients</div>
        <button class="btn btn-ghost" style="font-size:0.72rem;padding:6px 12px" onclick="clearAll()">Clear all</button>
      </div>
      <ul class="ingredient-list" id="ingredientList"><li class="empty-state"><div class="icon">ðŸ¥—</div>Add ingredients to start building your meal</li></ul>
    </div>
  </div>

  <!-- Daily Goals -->
  <div class="goals-panel">
    <div class="goals-header" onclick="toggleGoals()" id="goalsHeader">
      <div class="goals-header-left">
        <div class="panel-title" style="margin:0">ðŸŽ¯ Daily Goals</div>
        <span style="font-size:0.72rem;color:var(--muted)" id="goalsSubtitle">set your targets</span>
      </div>
      <span class="goals-toggle-icon" id="goalsToggleIcon">â–¼</span>
    </div>
    <div class="goals-body" id="goalsBody">
      <div class="section-label" style="margin-bottom:10px">Quick presets</div>
      <div class="goals-presets">
        <div class="preset-chip" onclick="applyGoalPreset(&#39;sedentary&#39;)">Sedentary</div>
        <div class="preset-chip" onclick="applyGoalPreset(&#39;active&#39;)">Active</div>
        <div class="preset-chip" onclick="applyGoalPreset(&#39;athlete&#39;)">Athlete</div>
        <div class="preset-chip" onclick="applyGoalPreset(&#39;bulk&#39;)">Bulking</div>
        <div class="preset-chip" onclick="applyGoalPreset(&#39;cut&#39;)">Cutting</div>
      </div>
      <div class="section-label" style="margin-bottom:10px">Custom targets</div>
      <div class="goals-grid">
        <div class="goal-field">
          <label>Calories</label>
          <input type="number" id="goalCal" placeholder="2000" min="0" oninput="onGoalChange()">
          <div class="goal-unit">kcal</div>
        </div>
        <div class="goal-field">
          <label>Protein</label>
          <input type="number" id="goalProtein" placeholder="150" min="0" oninput="onGoalChange()">
          <div class="goal-unit">grams</div>
        </div>
        <div class="goal-field">
          <label>Carbs</label>
          <input type="number" id="goalCarbs" placeholder="250" min="0" oninput="onGoalChange()">
          <div class="goal-unit">grams</div>
        </div>
        <div class="goal-field">
          <label>Fat</label>
          <input type="number" id="goalFat" placeholder="65" min="0" oninput="onGoalChange()">
          <div class="goal-unit">grams</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Results -->
  <div class="results-panel" id="resultsPanel">
    <div class="panel-title">Nutritional Analysis</div>
    <div id="resultsContent"><div class="empty-state"><div class="icon">ðŸ“Š</div>Your meal nutrition will appear here once you add ingredients above.</div></div>
  </div>
</div>

<script>
// â”€â”€ Nutrition database (per 100g) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DB = {
  // Proteins
  "tofu":           { cal:76,  protein:8,   carbs:1.9, fat:4.8, fiber:0.3, iron:1.6, calcium:350,potassium:121, vitC:0.1, vitB12:0, zinc:0.8, magnesium:30 },
  "tempeh":         { cal:193, protein:19,  carbs:9.4, fat:11,  fiber:1.8, iron:2.7, calcium:111,potassium:401, vitC:0,   vitB12:0, zinc:1.7, magnesium:81 },
  "edamame":        { cal:121, protein:11,  carbs:8.9, fat:5.2, fiber:5.2, iron:2.3, calcium:63, potassium:436, vitC:6.1, vitB12:0, zinc:1.4, magnesium:64 },
  "lentils":        { cal:116, protein:9,   carbs:20,  fat:0.4, fiber:7.9, iron:3.3, calcium:19, potassium:369, vitC:1.5, vitB12:0, zinc:1.3, magnesium:36 },
  "green lentils":  { cal:106, protein:9,   carbs:19,  fat:0.4, fiber:7.8, iron:3.2, calcium:25, potassium:370, vitC:1.5, vitB12:0, zinc:1.3, magnesium:36 },
  "chickpeas":      { cal:164, protein:9,   carbs:27,  fat:2.6, fiber:7.6, iron:2.9, calcium:49, potassium:291, vitC:1.3, vitB12:0, zinc:1.5, magnesium:48 },
  "black beans":    { cal:132, protein:8.9, carbs:24,  fat:0.5, fiber:8.7, iron:2.1, calcium:27, potassium:355, vitC:0,   vitB12:0, zinc:1.0, magnesium:60 },
  "greek yogurt":   { cal:97,  protein:9,   carbs:3.6, fat:5,   fiber:0,   iron:0.1, calcium:110,potassium:141, vitC:0,   vitB12:1.3,zinc:0.5, magnesium:11 },
  "cottage cheese": { cal:98,  protein:11,  carbs:3.4, fat:4.3, fiber:0,   iron:0.1, calcium:83, potassium:104, vitC:0,   vitB12:0.4,zinc:0.4, magnesium:8  },
  "eggs":           { cal:155, protein:13,  carbs:1.1, fat:11,  fiber:0,   iron:1.8, calcium:56, potassium:138, vitC:0,   vitB12:1.1,zinc:1.3, magnesium:12 },
  // Grains
  "quinoa":         { cal:120, protein:4.4, carbs:22,  fat:1.9, fiber:2.8, iron:1.5, calcium:17, potassium:172, vitC:0,   vitB12:0, zinc:1.1, magnesium:64 },
  "brown rice":     { cal:112, protein:2.6, carbs:23,  fat:0.9, fiber:1.8, iron:0.5, calcium:10, potassium:79,  vitC:0,   vitB12:0, zinc:0.6, magnesium:43 },
  "oats":           { cal:389, protein:17,  carbs:66,  fat:7,   fiber:10,  iron:4.7, calcium:54, potassium:429, vitC:0,   vitB12:0, zinc:3.9, magnesium:177},
  "whole wheat bread":{ cal:247, protein:13, carbs:41, fat:3.4, fiber:7,   iron:3.6, calcium:107,potassium:248, vitC:0,   vitB12:0, zinc:1.5, magnesium:76 },
  "barley":           { cal:354, protein:12, carbs:74,  fat:2.3, fiber:17,  iron:3.6, calcium:33, potassium:452, vitC:0,   vitB12:0, zinc:2.8, magnesium:133},
  // Vegetables
  "spinach":        { cal:23,  protein:2.9, carbs:3.6, fat:0.4, fiber:2.2, iron:2.7, calcium:99, potassium:558, vitC:28,  vitB12:0, zinc:0.5, magnesium:79 },
  "kale":           { cal:49,  protein:4.3, carbs:9,   fat:0.9, fiber:3.6, iron:1.5, calcium:150,potassium:491, vitC:120, vitB12:0, zinc:0.4, magnesium:47 },
  "broccoli":       { cal:34,  protein:2.8, carbs:7,   fat:0.4, fiber:2.6, iron:0.7, calcium:47, potassium:316, vitC:89,  vitB12:0, zinc:0.4, magnesium:21 },
  "sweet potato":   { cal:86,  protein:1.6, carbs:20,  fat:0.1, fiber:3,   iron:0.6, calcium:30, potassium:337, vitC:19,  vitB12:0, zinc:0.3, magnesium:25 },
  "avocado":        { cal:160, protein:2,   carbs:9,   fat:15,  fiber:6.7, iron:0.6, calcium:12, potassium:485, vitC:10,  vitB12:0, zinc:0.6, magnesium:29 },
  "carrot":         { cal:41,  protein:0.9, carbs:10,  fat:0.2, fiber:2.8, iron:0.3, calcium:33, potassium:320, vitC:5.9, vitB12:0, zinc:0.2, magnesium:12 },
  "celery":         { cal:16,  protein:0.7, carbs:3,   fat:0.2, fiber:1.6, iron:0.2, calcium:40, potassium:260, vitC:3.1, vitB12:0, zinc:0.1, magnesium:11 },
  "cucumber":       { cal:15,  protein:0.7, carbs:3.6, fat:0.1, fiber:0.5, iron:0.3, calcium:16, potassium:147, vitC:2.8, vitB12:0, zinc:0.2, magnesium:13 },
  "tomato":         { cal:18,  protein:0.9, carbs:3.9, fat:0.2, fiber:1.2, iron:0.3, calcium:10, potassium:237, vitC:14,  vitB12:0, zinc:0.2, magnesium:11 },
  "bell pepper":    { cal:31,  protein:1,   carbs:6,   fat:0.3, fiber:2.1, iron:0.4, calcium:10, potassium:211, vitC:128, vitB12:0, zinc:0.2, magnesium:10 },
  "red bell pepper":{ cal:31,  protein:1,   carbs:6,   fat:0.3, fiber:2.1, iron:0.4, calcium:10, potassium:211, vitC:128, vitB12:0, zinc:0.2, magnesium:10 },
  "onion":          { cal:40,  protein:1.1, carbs:9.3, fat:0.1, fiber:1.7, iron:0.2, calcium:23, potassium:146, vitC:7.4, vitB12:0, zinc:0.2, magnesium:10 },
  "garlic":         { cal:149, protein:6.4, carbs:33,  fat:0.5, fiber:2.1, iron:1.7, calcium:181,potassium:401, vitC:31,  vitB12:0, zinc:1.2, magnesium:25 },
  "mushrooms":      { cal:22,  protein:3.1, carbs:3.3, fat:0.3, fiber:1,   iron:0.5, calcium:3,  potassium:318, vitC:2.1, vitB12:0, zinc:0.5, magnesium:9  },
  "zucchini":       { cal:17,  protein:1.2, carbs:3.1, fat:0.3, fiber:1,   iron:0.4, calcium:16, potassium:261, vitC:17,  vitB12:0, zinc:0.3, magnesium:18 },
  "cauliflower":    { cal:25,  protein:1.9, carbs:5,   fat:0.3, fiber:2,   iron:0.4, calcium:22, potassium:299, vitC:48,  vitB12:0, zinc:0.3, magnesium:15 },
  "brussels sprouts":{ cal:43, protein:3.4, carbs:9,   fat:0.3, fiber:3.8, iron:1.4, calcium:42, potassium:389, vitC:85,  vitB12:0, zinc:0.4, magnesium:23 },
  "green beans":    { cal:31,  protein:1.8, carbs:7,   fat:0.2, fiber:2.7, iron:1,   calcium:37, potassium:211, vitC:12,  vitB12:0, zinc:0.2, magnesium:25 },
  "peas":           { cal:81,  protein:5.4, carbs:14,  fat:0.4, fiber:5.1, iron:1.5, calcium:25, potassium:244, vitC:40,  vitB12:0, zinc:1.2, magnesium:33 },
  "corn":           { cal:86,  protein:3.2, carbs:19,  fat:1.2, fiber:2.7, iron:0.5, calcium:2,  potassium:270, vitC:6.8, vitB12:0, zinc:0.5, magnesium:37 },
  "potato":         { cal:77,  protein:2,   carbs:17,  fat:0.1, fiber:2.2, iron:0.8, calcium:12, potassium:421, vitC:19,  vitB12:0, zinc:0.3, magnesium:23 },
  "beet":           { cal:43,  protein:1.6, carbs:10,  fat:0.2, fiber:2.8, iron:0.8, calcium:16, potassium:325, vitC:4.9, vitB12:0, zinc:0.4, magnesium:23 },
  "asparagus":      { cal:20,  protein:2.2, carbs:3.9, fat:0.1, fiber:2.1, iron:2.1, calcium:24, potassium:202, vitC:5.6, vitB12:0, zinc:0.5, magnesium:14 },
  "cabbage":        { cal:25,  protein:1.3, carbs:5.8, fat:0.1, fiber:2.5, iron:0.5, calcium:40, potassium:170, vitC:36,  vitB12:0, zinc:0.2, magnesium:12 },
  "bok choy":       { cal:13,  protein:1.5, carbs:2.2, fat:0.2, fiber:1,   iron:0.8, calcium:105,potassium:252, vitC:45,  vitB12:0, zinc:0.2, magnesium:19 },
  "arugula":        { cal:25,  protein:2.6, carbs:3.7, fat:0.7, fiber:1.6, iron:1.5, calcium:160,potassium:369, vitC:15,  vitB12:0, zinc:0.5, magnesium:47 },
  "swiss chard":    { cal:19,  protein:1.8, carbs:3.7, fat:0.2, fiber:1.6, iron:1.8, calcium:51, potassium:379, vitC:30,  vitB12:0, zinc:0.4, magnesium:81 },
  "collard greens": { cal:32,  protein:3,   carbs:5.7, fat:0.6, fiber:4,   iron:0.5, calcium:232,potassium:213, vitC:35,  vitB12:0, zinc:0.2, magnesium:27 },
  "eggplant":       { cal:25,  protein:1,   carbs:6,   fat:0.2, fiber:3,   iron:0.2, calcium:9,  potassium:229, vitC:2.2, vitB12:0, zinc:0.1, magnesium:14 },
  "leek":           { cal:61,  protein:1.5, carbs:14,  fat:0.3, fiber:1.8, iron:2.1, calcium:59, potassium:180, vitC:12,  vitB12:0, zinc:0.1, magnesium:28 },
  "butternut squash":{ cal:45, protein:1,   carbs:12,  fat:0.1, fiber:2,   iron:0.7, calcium:48, potassium:352, vitC:21,  vitB12:0, zinc:0.2, magnesium:34 },
  "acorn squash":   { cal:40,  protein:0.9, carbs:10,  fat:0.1, fiber:1.5, iron:0.6, calcium:44, potassium:347, vitC:11,  vitB12:0, zinc:0.2, magnesium:43 },
  "artichoke":      { cal:47,  protein:3.3, carbs:11,  fat:0.2, fiber:5.4, iron:1.3, calcium:44, potassium:370, vitC:11,  vitB12:0, zinc:0.5, magnesium:60 },
  "turnip":         { cal:28,  protein:0.9, carbs:6.4, fat:0.1, fiber:1.8, iron:0.3, calcium:30, potassium:191, vitC:21,  vitB12:0, zinc:0.3, magnesium:11 },
  "radish":         { cal:16,  protein:0.7, carbs:3.4, fat:0.1, fiber:1.6, iron:0.3, calcium:25, potassium:233, vitC:14,  vitB12:0, zinc:0.3, magnesium:10 },
  // Fruits
  "banana":         { cal:89,  protein:1.1, carbs:23,  fat:0.3, fiber:2.6, iron:0.3, calcium:5,  potassium:358, vitC:8.7, vitB12:0, zinc:0.2, magnesium:27 },
  "apple":          { cal:52,  protein:0.3, carbs:14,  fat:0.2, fiber:2.4, iron:0.1, calcium:6,  potassium:107, vitC:4.6, vitB12:0, zinc:0.0, magnesium:5  },
  "orange":         { cal:47,  protein:0.9, carbs:12,  fat:0.1, fiber:2.4, iron:0.1, calcium:40, potassium:181, vitC:53,  vitB12:0, zinc:0.1, magnesium:10 },
  "blueberries":    { cal:57,  protein:0.7, carbs:14,  fat:0.3, fiber:2.4, iron:0.3, calcium:6,  potassium:77,  vitC:9.7, vitB12:0, zinc:0.2, magnesium:6  },
  "strawberries":   { cal:32,  protein:0.7, carbs:7.7, fat:0.3, fiber:2,   iron:0.4, calcium:16, potassium:153, vitC:59,  vitB12:0, zinc:0.1, magnesium:13 },
  "mango":          { cal:60,  protein:0.8, carbs:15,  fat:0.4, fiber:1.6, iron:0.2, calcium:11, potassium:168, vitC:36,  vitB12:0, zinc:0.1, magnesium:10 },
  "pineapple":      { cal:50,  protein:0.5, carbs:13,  fat:0.1, fiber:1.4, iron:0.3, calcium:13, potassium:109, vitC:47,  vitB12:0, zinc:0.1, magnesium:12 },
  "grapes":         { cal:69,  protein:0.7, carbs:18,  fat:0.2, fiber:0.9, iron:0.4, calcium:10, potassium:191, vitC:3.2, vitB12:0, zinc:0.1, magnesium:7  },
  "watermelon":     { cal:30,  protein:0.6, carbs:7.6, fat:0.2, fiber:0.4, iron:0.2, calcium:7,  potassium:112, vitC:8.1, vitB12:0, zinc:0.1, magnesium:10 },
  "peach":          { cal:39,  protein:0.9, carbs:10,  fat:0.3, fiber:1.5, iron:0.3, calcium:6,  potassium:190, vitC:6.6, vitB12:0, zinc:0.2, magnesium:9  },
  "pear":           { cal:57,  protein:0.4, carbs:15,  fat:0.1, fiber:3.1, iron:0.2, calcium:9,  potassium:116, vitC:4.3, vitB12:0, zinc:0.1, magnesium:7  },
  "kiwi":           { cal:61,  protein:1.1, carbs:15,  fat:0.5, fiber:3,   iron:0.3, calcium:34, potassium:312, vitC:93,  vitB12:0, zinc:0.1, magnesium:17 },
  "lemon":          { cal:29,  protein:1.1, carbs:9.3, fat:0.3, fiber:2.8, iron:0.6, calcium:26, potassium:138, vitC:53,  vitB12:0, zinc:0.1, magnesium:8  },
  "cherries":       { cal:50,  protein:1,   carbs:12,  fat:0.3, fiber:1.6, iron:0.4, calcium:13, potassium:222, vitC:7,   vitB12:0, zinc:0.1, magnesium:11 },
  "raspberries":    { cal:52,  protein:1.2, carbs:12,  fat:0.7, fiber:6.5, iron:0.7, calcium:25, potassium:151, vitC:26,  vitB12:0, zinc:0.4, magnesium:22 },
  "blackberries":   { cal:43,  protein:1.4, carbs:10,  fat:0.5, fiber:5.3, iron:0.6, calcium:29, potassium:162, vitC:21,  vitB12:0, zinc:0.5, magnesium:20 },
  "pomegranate":    { cal:83,  protein:1.7, carbs:19,  fat:1.2, fiber:4,   iron:0.3, calcium:10, potassium:236, vitC:10,  vitB12:0, zinc:0.4, magnesium:12 },
  "papaya":         { cal:43,  protein:0.5, carbs:11,  fat:0.3, fiber:1.7, iron:0.3, calcium:20, potassium:182, vitC:62,  vitB12:0, zinc:0.1, magnesium:21 },
  // Nuts & Seeds
  "almonds":        { cal:579, protein:21,  carbs:22,  fat:50,  fiber:12.5,iron:3.7, calcium:264,potassium:733, vitC:0,   vitB12:0, zinc:3.1, magnesium:270},
  "chia seeds":     { cal:486, protein:17,  carbs:42,  fat:31,  fiber:34,  iron:7.7, calcium:631,potassium:407, vitC:1.6, vitB12:0, zinc:4.6, magnesium:335},
  "hemp seeds":     { cal:553, protein:32,  carbs:8.7, fat:49,  fiber:4,   iron:7.9, calcium:70, potassium:1200,vitC:1,   vitB12:0, zinc:9.9, magnesium:700},
  "pumpkin seeds":  { cal:559, protein:30,  carbs:11,  fat:49,  fiber:6,   iron:8.8, calcium:46, potassium:809, vitC:1.9, vitB12:0, zinc:7.8, magnesium:592},
  "peanut butter":  { cal:588, protein:25,  carbs:20,  fat:50,  fiber:6,   iron:1.9, calcium:43, potassium:558, vitC:0,   vitB12:0, zinc:2.9, magnesium:154},
  // Dairy alternatives
  "soy milk":       { cal:54,  protein:3.3, carbs:6.3, fat:1.8, fiber:0.5, iron:0.6, calcium:123,potassium:118, vitC:0,   vitB12:1.2,zinc:0.3, magnesium:18 },
  "oat milk":       { cal:47,  protein:1,   carbs:7.9, fat:1.5, fiber:0.8, iron:0.2, calcium:120,potassium:62,  vitC:0,   vitB12:0.4,zinc:0.1, magnesium:10 },
  "nutritional yeast":{ cal:325,protein:50, carbs:28,  fat:6,   fiber:14,  iron:4.9, calcium:38, potassium:1500,vitC:0,   vitB12:2.4,zinc:2.9, magnesium:97 },
};

// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let meal = [];
let recentlyUsed = []; // ordered list of ingredient names, most recent first

// â”€â”€ Render recently used chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderRecentChips() {
  const section = document.getElementById('recentSection');
  const grid = document.getElementById('recentChips');
  if (!recentlyUsed.length) { section.style.display = 'none'; return; }
  section.style.display = 'block';
  grid.innerHTML = recentlyUsed.map(name => `
    <div class="preset-chip" onclick="quickAdd('${name}')">${name}</div>
  `).join('');
}

function quickAdd(name) {
  const rawAmount = parseFloat(document.getElementById('customAmount').value) || 100;
  const unit = document.getElementById('customUnit').value;
  const amount = toGrams(rawAmount, unit);
  meal.push({ name, amount, displayAmount: rawAmount, unit });
  renderMeal(); renderResults();
}

// â”€â”€ Autocomplete suggestions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const dl = document.getElementById('ingredientSuggestions');
Object.keys(DB).forEach(k => {
  const opt = document.createElement('option'); opt.value = k; dl.appendChild(opt);
});

// â”€â”€ Add functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// â”€â”€ Unit conversion to grams â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 1 oz = 28.3495g, 1 tsp â‰ˆ 4.2g (average density for dry/powder foods)
function toGrams(amount, unit) {
  if (unit === 'oz')   return amount * 28.3495;
  if (unit === 'floz') return amount * 29.5735;
  if (unit === 'tsp')  return amount * 4.2;
  if (unit === 'tbsp') return amount * 12.6;
  if (unit === 'cup')  return amount * 236.6;
  return amount; // already grams
}

function addCustomIngredient() {
  const name = document.getElementById('customInput').value.trim().toLowerCase();
  const rawAmount = parseFloat(document.getElementById('customAmount').value) || 100;
  const unit = document.getElementById('customUnit').value;
  const amount = toGrams(rawAmount, unit);
  if (!name) return alert('Please enter an ingredient name.');
  if (!DB[name]) return alert(`"${name}" not found in our database. Try one of the preset ingredients.`);
  meal.push({ name, amount, displayAmount: rawAmount, unit });
  document.getElementById('customInput').value = '';
  // track recently used (unique, most recent first, max 10)
  recentlyUsed = [name, ...recentlyUsed.filter(n => n !== name)].slice(0, 15);
  renderRecentChips();
  renderMeal(); renderResults();
}

function removeIngredient(i) {
  meal.splice(i, 1);
  renderMeal(); renderResults();
}

function clearAll() {
  meal = []; recentlyUsed = [];
  renderRecentChips(); renderMeal(); renderResults();
}

// â”€â”€ Render ingredient list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderMeal() {
  const ul = document.getElementById('ingredientList');
  if (!meal.length) {
    ul.innerHTML = '<li class="empty-state"><div class="icon">ðŸ¥—</div>Add ingredients to start building your meal</li>';
    return;
  }
  ul.innerHTML = meal.map((item, i) => `
    <li class="ingredient-item">
      <span>${item.name}<span class="amount">${item.displayAmount}${item.unit}</span></span>
      <button class="remove-btn" onclick="removeIngredient(${i})">âœ•</button>
    </li>`).join('');
}

// â”€â”€ Compute totals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function computeTotals() {
  const keys = ['cal','protein','carbs','fat','fiber','iron','calcium','potassium','vitC','vitB12','zinc','magnesium'];
  const totals = Object.fromEntries(keys.map(k => [k, 0]));
  meal.forEach(({name, amount}) => {
    const d = DB[name];
    if (!d) return;
    const mult = amount / 100;
    keys.forEach(k => totals[k] += (d[k] || 0) * mult);
  });
  return totals;
}

// â”€â”€ Athlete tips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getTip(t) {
  if (t.protein < 20) return "âš¡ <strong>Protein is low</strong> â€” consider adding tofu, tempeh, or hemp seeds to support muscle recovery.";
  if (t.iron < 3)   return "ðŸ©¸ <strong>Iron intake is modest</strong> â€” pair iron-rich foods (lentils, spinach) with vitamin C to boost absorption.";
  if (t.cal > 800)  return "ðŸ”¥ <strong>High-energy meal</strong> â€” great for pre/post intense training sessions.";
  if (t.fiber > 15) return "ðŸŒ¿ <strong>Excellent fiber content</strong> â€” supports gut health & sustained energy release.";
  return "ðŸ’ª <strong>Balanced plant-powered meal</strong> â€” you're fueling your body well!";
}

// â”€â”€ DV reference (daily values) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DV = { iron:18, calcium:1000, potassium:3500, vitC:90, vitB12:2.4, zinc:11, magnesium:400 };
const MICRO_COLOR = { iron:'#fb923c', calcium:'#60a5fa', potassium:'#c084fc', vitC:'#4ade80', vitB12:'#f472b6', zinc:'#fbbf24', magnesium:'#34d399' };

// â”€â”€ Render results â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderResults() {
  const el = document.getElementById('resultsContent');
  if (!meal.length) {
    el.innerHTML = '<div class="empty-state"><div class="icon">ðŸ“Š</div>Your meal nutrition will appear here once you add ingredients above.</div>';
    return;
  }
  const t = computeTotals();
  const g = getGoals();
  const round1 = v => Math.round(v * 10) / 10;

  function goalBar(val, goal, color) {
    if (!goal) return '';
    const pct = Math.min(120, (val / goal) * 100);
    const over = pct > 100;
    const displayPct = Math.round((val / goal) * 100);
    return `
      <div class="goal-bar-wrap">
        <div class="goal-bar" style="width:${Math.min(100,pct)}%;background:${over ? '#f87171' : color}"></div>
      </div>
      <div class="goal-pct" style="${over ? 'color:#f87171' : ''}">${displayPct}% of goal</div>`;
  }

  function macroCard(val, label, color, goalVal, goalKey) {
    const pct = goalVal ? Math.round((val / goalVal) * 100) : null;
    const over = pct !== null && pct > 100;
    return `<div class="macro-card${over ? ' over' : ''}">
      <div class="val" style="color:${color}">${val}</div>
      <div class="lbl">${label}</div>
      ${goalBar(parseFloat(val), goalVal, color)}
    </div>`;
  }

  el.innerHTML = `
    <div class="macro-grid">
      ${macroCard(Math.round(t.cal),      'Calories', 'var(--orange)', g.cal,     'cal')}
      ${macroCard(round1(t.protein)+'g',  'Protein',  'var(--green)',  g.protein, 'protein')}
      ${macroCard(round1(t.carbs)+'g',    'Carbs',    'var(--blue)',   g.carbs,   'carbs')}
      ${macroCard(round1(t.fat)+'g',      'Fat',      'var(--purple)', g.fat,     'fat')}
    </div>

    <div class="section-label">Fiber & Micronutrients (% Daily Value)</div>
    <div class="micro-grid">
      <div class="micro-card">
        <div class="micro-lbl">Fiber</div>
        <div class="micro-bar-wrap"><div class="micro-bar" style="width:${Math.min(100,(t.fiber/28)*100)}%;background:var(--lime)"></div></div>
        <div class="micro-val">${round1(t.fiber)}g Â· ${Math.round((t.fiber/28)*100)}% DV</div>
      </div>
      ${['iron','calcium','potassium','vitC','vitB12','zinc','magnesium'].map(key => {
        const pct = Math.min(100, (t[key]/DV[key])*100);
        const labels = {iron:'Iron',calcium:'Calcium',potassium:'Potassium',vitC:'Vitamin C',vitB12:'Vitamin B12',zinc:'Zinc',magnesium:'Magnesium'};
        const units = {iron:'mg',calcium:'mg',potassium:'mg',vitC:'mg',vitB12:'Âµg',zinc:'mg',magnesium:'mg'};
        return `<div class="micro-card">
          <div class="micro-lbl">${labels[key]}</div>
          <div class="micro-bar-wrap"><div class="micro-bar" style="width:${pct}%;background:${MICRO_COLOR[key]}"></div></div>
          <div class="micro-val">${round1(t[key])}${units[key]} Â· ${Math.round(pct)}% DV</div>
        </div>`;
      }).join('')}
    </div>

    <div class="athlete-tip">${getTip(t)}</div>
  `;
}

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderMeal();
renderResults();

// â”€â”€ Daily Goals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const GOAL_PRESETS = {
  sedentary: { cal:1800, protein:80,  carbs:220, fat:60  },
  active:    { cal:2200, protein:130, carbs:270, fat:70  },
  athlete:   { cal:2800, protein:175, carbs:350, fat:85  },
  bulk:      { cal:3200, protein:200, carbs:420, fat:100 },
  cut:       { cal:1600, protein:160, carbs:150, fat:50  },
};

function getGoals() {
  return {
    cal:     parseFloat(document.getElementById('goalCal').value)     || 0,
    protein: parseFloat(document.getElementById('goalProtein').value) || 0,
    carbs:   parseFloat(document.getElementById('goalCarbs').value)   || 0,
    fat:     parseFloat(document.getElementById('goalFat').value)     || 0,
  };
}

function applyGoalPreset(key) {
  const p = GOAL_PRESETS[key];
  document.getElementById('goalCal').value     = p.cal;
  document.getElementById('goalProtein').value = p.protein;
  document.getElementById('goalCarbs').value   = p.carbs;
  document.getElementById('goalFat').value     = p.fat;
  // highlight selected chip
  document.querySelectorAll('.goals-presets .preset-chip').forEach(el => {
    el.classList.toggle('selected', el.textContent.toLowerCase().startsWith(key.substring(0,3)));
  });
  updateGoalsSubtitle();
  renderResults();
}

function onGoalChange() {
  // deselect presets when user edits manually
  document.querySelectorAll('.goals-presets .preset-chip').forEach(el => el.classList.remove('selected'));
  updateGoalsSubtitle();
  renderResults();
}

function updateGoalsSubtitle() {
  const g = getGoals();
  const sub = document.getElementById('goalsSubtitle');
  if (g.cal || g.protein || g.carbs || g.fat) {
    const parts = [];
    if (g.cal)     parts.push(`${g.cal} kcal`);
    if (g.protein) parts.push(`${g.protein}g protein`);
    sub.textContent = parts.join(' Â· ');
  } else {
    sub.textContent = 'set your targets';
  }
}

function toggleGoals() {
  const body = document.getElementById('goalsBody');
  const icon = document.getElementById('goalsToggleIcon');
  const open = body.classList.toggle('open');
  icon.classList.toggle('open', open);
}
</script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/vegfuel/sw.js', {scope: '/vegfuel/'}).catch(() => {});
  });
}
</script>


</body></html>
